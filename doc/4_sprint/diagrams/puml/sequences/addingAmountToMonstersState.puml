@startuml
title  When round is finished adding a defiend amount to monster state
autonumber

participant "ZelpopGame: game" as z
participant InGame as g
participant Dungeon as d
participant "maze: Maze" as m
participant "e: Entity" as e
participant "Stats" as s


z -> g: evolve(game, CMD)

g -> d: updateAll(game)

d -> m: regenEntites()

loop for each monster entity
    m -> e: regen()
    alt if default state
          e -> s: setCurrentHp()
          note right
	       min between
               Max Hp of the montser
               and (Vitality stat +
               current Hp) of the monster
          end note
    else if passed Stat
          e -> s: setCurrentHp(passedStat)
          note right
	       it depend of
	       the monster type
          end note
    end
end


m --> d: entities is been updated

d --> g: entities is been updated

g --> z: entities is been updated
@enduml